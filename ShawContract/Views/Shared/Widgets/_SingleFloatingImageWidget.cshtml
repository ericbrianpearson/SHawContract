@using ShawContract.Models.Widgets.SingleFloatingImageWidget
@using ShawContract.Models.InlineEditors
@using System.Text.RegularExpressions

@model ShawContract.Models.Widgets.SingleFloatingImageWidget.SingleFloatingImageWidgetViewModel

@{
    var editMode = Context.Kentico().PageBuilder().EditMode;
    var imageAlignment = Model.ImageAlignment == "right" ? "col-sm-12 text-right" : "col-sm-12 text-left";
    var image = Model.ImageUrl ?? "https://placehold.it/768x534";
}

<section class="widget dancing-squares now-viewable">
    <div class="container">
        <div class="@imageAlignment">
            <div class="content-box">

                <div class="img-box">
                    <img class="dance-img mt-5" src="@image" alt="description">
                    <p class="photo-credits">
                        @if (editMode)
                        {
                            Html.RenderPartial("InlineEditors/_TextEditor", new TextEditorViewModel()
                            {
                                PropertyName = nameof(SingleFloatingImageWidgetProperties.PhotoCredit),
                                Text = Model.PhotoCredit,
                                EnableFormatting = false
                            });
                        }
                        else
                        {
                            @Regex.Replace(Model.Title ?? "", "<.*?>", String.Empty)
                        }
                    </p>
                </div>

                <div class="card info-card text-left">
                    <div class="card-body">
                        <div class="mark"></div>
                        <h5 class="card-title">
                            @if (editMode)
                            {
                                Html.RenderPartial("InlineEditors/_TextEditor", new TextEditorViewModel()
                                {
                                    PropertyName = nameof(SingleFloatingImageWidgetProperties.Title),
                                    Text = Model.Title,
                                    EnableFormatting = false
                                });
                            }
                            else
                            {
                                @Regex.Replace(Model.Title ?? "", "<.*?>", String.Empty)
                            }
                        </h5>
                        <p class="card-text">
                            @if (editMode)
                            {
                                Html.RenderPartial("InlineEditors/_TextEditor", new TextEditorViewModel()
                                {
                                    PropertyName = nameof(SingleFloatingImageWidgetProperties.Description),
                                    Text = Model.Description,
                                    EnableFormatting = true
                                });
                            }
                            else
                            {
                                @Html.Raw(Model.Description)
                            }
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="dancing-boxes">
        <div class="relative-wrapper">
            <div class="dancing-box dance-box-1"></div>
            <div class="dancing-box dance-box-2"></div>
            <div class="dancing-box dance-box-3"></div>
            <div class="dancing-box dance-box-4"></div>
        </div>
    </div>
</section>